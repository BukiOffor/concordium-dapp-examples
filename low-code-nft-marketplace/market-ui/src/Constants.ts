import { Buffer } from 'buffer/';
import { Cis2ContractInfo, ContractInfo } from 'common-ui';

import { ModuleReference } from '@concordium/web-sdk';

/**
 * Contract Address for Marketplace. You should specify your contract's index when you initialized it.
 */
export const MARKET_CONTRACT_ADDRESS = {
	index: BigInt(1871),
	subindex: BigInt(0),
};

/**
 * Marketplace Contract Schema.
 * Serialization code depends on this Schema. Any changes to the schema should have a corresponding change in MarketplaceDeserialzer.ts code.
 */
// Module Reference and Contract Schema for the Marketplace Contract
// Both module ref and the contract schema should be changed after a new contract deployed (if there are changes)
const MARKET_CONTRACT_SCHEMA =
	"FFFF02010000000A0000004D61726B65742D4E465401001400010000000A000000636F6D6D697373696F6E03030000000300000061646400140005000000140000006E66745F636F6E74726163745F616464726573730C08000000746F6B656E5F69641D000500000070726963650A07000000726F79616C747903080000007175616E746974791B25000000040000006C69737401140101000000100114000700000008000000746F6B656E5F69641D0008000000636F6E74726163740C0500000070726963650A050000006F776E65720B07000000726F79616C7479030D0000007072696D6172795F6F776E65720B080000007175616E746974791B25000000080000007472616E7366657200140005000000140000006E66745F636F6E74726163745F616464726573730C08000000746F6B656E5F69641D0002000000746F0B050000006F776E65720B080000007175616E746974791B25000000";

export const MARKETPLACE_CONTRACT_INFO: ContractInfo = {
	contractName: "Market-NFT",
	schemaBuffer: Buffer.from(MARKET_CONTRACT_SCHEMA, "hex"),
	moduleRef: new ModuleReference(
		"4f5e72a303d57d5502689f56bad19750b5bb11ede1cf662a082ef97e18651f69"
	),
};
// Module Reference and Contract Schema for the CIS2-Multi
// Both module ref and the contract schema should be changed after a new contract deployed (if there are changes)
const MULTI_CONTRACT_MODULE_REF =
	"dc5753eabb858a5a2420e7fa9bcc38cf92c0b031bb193fb9161a51a0ed4904b2";
const MULTI_CONTRACT_SCHEMA =
	"ffff03010000000a000000636973325f6d756c7469000a0000000900000062616c616e63654f6606100114000200000008000000746f6b656e5f69641d0007000000616464726573731502000000070000004163636f756e7401010000000b08000000436f6e747261637401010000000c10011b2500000015040000000e000000496e76616c6964546f6b656e49640211000000496e73756666696369656e7446756e6473020c000000556e617574686f72697a65640206000000437573746f6d010100000015060000000b0000005061727365506172616d7302070000004c6f6746756c6c020c0000004c6f674d616c666f726d65640213000000496e76616c6964436f6e74726163744e616d65020c000000436f6e74726163744f6e6c790213000000496e766f6b65436f6e74726163744572726f7202040000006d696e7404140002000000050000006f776e65721502000000070000004163636f756e7401010000000b08000000436f6e747261637401010000000c06000000746f6b656e7312021d001400020000000c000000746f6b656e5f616d6f756e741b250000000c0000006d657461646174615f75726c1400020000000300000075726c160104000000686173681502000000040000004e6f6e650204000000536f6d65010100000013200000000215040000000e000000496e76616c6964546f6b656e49640211000000496e73756666696369656e7446756e6473020c000000556e617574686f72697a65640206000000437573746f6d010100000015060000000b0000005061727365506172616d7302070000004c6f6746756c6c020c0000004c6f674d616c666f726d65640213000000496e76616c6964436f6e74726163744e616d65020c000000436f6e74726163744f6e6c790213000000496e766f6b65436f6e74726163744572726f72020f0000006f6e526563656976696e67434953320315040000000e000000496e76616c6964546f6b656e49640211000000496e73756666696369656e7446756e6473020c000000556e617574686f72697a65640206000000437573746f6d010100000015060000000b0000005061727365506172616d7302070000004c6f6746756c6c020c0000004c6f674d616c666f726d65640213000000496e76616c6964436f6e74726163744e616d65020c000000436f6e74726163744f6e6c790213000000496e766f6b65436f6e74726163744572726f72020a0000006f70657261746f724f66061001140002000000050000006f776e65721502000000070000004163636f756e7401010000000b08000000436f6e747261637401010000000c07000000616464726573731502000000070000004163636f756e7401010000000b08000000436f6e747261637401010000000c10010115040000000e000000496e76616c6964546f6b656e49640211000000496e73756666696369656e7446756e6473020c000000556e617574686f72697a65640206000000437573746f6d010100000015060000000b0000005061727365506172616d7302070000004c6f6746756c6c020c0000004c6f674d616c666f726d65640213000000496e76616c6964436f6e74726163744e616d65020c000000436f6e74726163744f6e6c790213000000496e766f6b65436f6e74726163744572726f72020f000000736574496d706c656d656e746f72730414000200000002000000696416000c000000696d706c656d656e746f727310020c15040000000e000000496e76616c6964546f6b656e49640211000000496e73756666696369656e7446756e6473020c000000556e617574686f72697a65640206000000437573746f6d010100000015060000000b0000005061727365506172616d7302070000004c6f6746756c6c020c0000004c6f674d616c666f726d65640213000000496e76616c6964436f6e74726163744e616d65020c000000436f6e74726163744f6e6c790213000000496e766f6b65436f6e74726163744572726f720208000000737570706f727473061001160010011503000000090000004e6f537570706f72740207000000537570706f72740209000000537570706f72744279010100000010000c15040000000e000000496e76616c6964546f6b656e49640211000000496e73756666696369656e7446756e6473020c000000556e617574686f72697a65640206000000437573746f6d010100000015060000000b0000005061727365506172616d7302070000004c6f6746756c6c020c0000004c6f674d616c666f726d65640213000000496e76616c6964436f6e74726163744e616d65020c000000436f6e74726163744f6e6c790213000000496e766f6b65436f6e74726163744572726f72020d000000746f6b656e4d657461646174610610011d0010011400020000000300000075726c160104000000686173681502000000040000004e6f6e650204000000536f6d65010100000013200000000215040000000e000000496e76616c6964546f6b656e49640211000000496e73756666696369656e7446756e6473020c000000556e617574686f72697a65640206000000437573746f6d010100000015060000000b0000005061727365506172616d7302070000004c6f6746756c6c020c0000004c6f674d616c666f726d65640213000000496e76616c6964436f6e74726163744e616d65020c000000436f6e74726163744f6e6c790213000000496e766f6b65436f6e74726163744572726f7202080000007472616e7366657204100114000500000008000000746f6b656e5f69641d0006000000616d6f756e741b250000000400000066726f6d1502000000070000004163636f756e7401010000000b08000000436f6e747261637401010000000c02000000746f1502000000070000004163636f756e7401010000000b08000000436f6e747261637401020000000c160104000000646174611d0115040000000e000000496e76616c6964546f6b656e49640211000000496e73756666696369656e7446756e6473020c000000556e617574686f72697a65640206000000437573746f6d010100000015060000000b0000005061727365506172616d7302070000004c6f6746756c6c020c0000004c6f674d616c666f726d65640213000000496e76616c6964436f6e74726163744e616d65020c000000436f6e74726163744f6e6c790213000000496e766f6b65436f6e74726163744572726f72020e0000007570646174654f70657261746f720410011400020000000600000075706461746515020000000600000052656d6f7665020300000041646402080000006f70657261746f721502000000070000004163636f756e7401010000000b08000000436f6e747261637401010000000c15040000000e000000496e76616c6964546f6b656e49640211000000496e73756666696369656e7446756e6473020c000000556e617574686f72697a65640206000000437573746f6d010100000015060000000b0000005061727365506172616d7302070000004c6f6746756c6c020c0000004c6f674d616c666f726d65640213000000496e76616c6964436f6e74726163744e616d65020c000000436f6e74726163744f6e6c790213000000496e766f6b65436f6e74726163744572726f720204000000766965770114000200000005000000737461746510020f1502000000070000004163636f756e7401010000000b08000000436f6e747261637401010000000c1400020000000800000062616c616e63657310020f1d001b25000000090000006f70657261746f727310021502000000070000004163636f756e7401010000000b08000000436f6e747261637401010000000c06000000746f6b656e7310021d00011f05000000fb0d000000546f6b656e4d65746164617461000200000008000000746f6b656e5f69641d000c0000006d657461646174615f75726c1400020000000300000075726c160104000000686173681502000000040000004e6f6e650204000000536f6d650101000000132000000002fc0e0000005570646174654f70657261746f7200030000000600000075706461746515020000000600000052656d6f7665020300000041646402050000006f776e65721502000000070000004163636f756e7401010000000b08000000436f6e747261637401010000000c080000006f70657261746f721502000000070000004163636f756e7401010000000b08000000436f6e747261637401010000000cfd040000004275726e000300000008000000746f6b656e5f69641d0006000000616d6f756e741b25000000050000006f776e65721502000000070000004163636f756e7401010000000b08000000436f6e747261637401010000000cfe040000004d696e74000300000008000000746f6b656e5f69641d0006000000616d6f756e741b25000000050000006f776e65721502000000070000004163636f756e7401010000000b08000000436f6e747261637401010000000cff080000005472616e73666572000400000008000000746f6b656e5f69641d0006000000616d6f756e741b250000000400000066726f6d1502000000070000004163636f756e7401010000000b08000000436f6e747261637401010000000c02000000746f1502000000070000004163636f756e7401010000000b08000000436f6e747261637401010000000c".toUpperCase();
export const CIS2_MULTI_CONTRACT_INFO: Cis2ContractInfo = {
	contractName: "cis2_multi",
	moduleRef: new ModuleReference(MULTI_CONTRACT_MODULE_REF),
	schemaBuffer: Buffer.from(MULTI_CONTRACT_SCHEMA, "hex"),
	tokenIdByteSize: 1,
};
export const IPFS_GATEWAY_URL = "https://gateway.pinata.cloud/ipfs/";

// Default value of the new marketplace contract init flag is false. 
// It needs to be set as true in order to allow to create a new marketplace contract instance
export const CREATE_NEW_MARKETPLACE = true;

// Marketplace has the minting tool as a subtool, set true if the minting tool is required instead of the marketplace.
export const MINTING_UI_ONLY = false;

export const tokenIdToNftImageFileName = (
	originalFileName: string,
	tokenId: string
) => {
	const ext = originalFileName.substring(originalFileName.lastIndexOf("."));

	return `nft_${tokenId}.${ext}`;
};
export const tokenIdToNftMetadataFileName = (tokenId: string) => {
	return `nft_${tokenId}_metadata.json`;
};

export const CONNCORDIUM_NODE_ENDPOINT = "https://grpc.testnet.concordium.com";
export const CONCORDIUM_NODE_PORT = 20000;